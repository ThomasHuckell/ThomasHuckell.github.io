<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>MASc</title>
  <meta name="description" content="Case study page of Project" />

  <link rel="stylesheet" href="css/style.css" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700;900&display=swap"
    rel="stylesheet" />
</head>

<body>
  <header class="header">
    <div class="header__content">
      <div class="header__logo-container">
        <div class="header__logo-img-cont">
          <img src="./assets/png/TH_transparent_2.png" alt="Ram Maheshwari Logo Image" class="header__logo-img" />
        </div>
        <span class="header__logo-sub">Thomas Huckell</span>
      </div>
      <div class="header__main">
        <ul class="header__links">
          <li class="header__link-wrapper">
            <a href="./index.html" class="header__link"> Home </a>
          </li>
          <li class="header__link-wrapper">
            <a href="./index.html#about" class="header__link">About </a>
          </li>
          <li class="header__link-wrapper">
            <a href="./index.html#projects" class="header__link">
              Projects & Experience
            </a>
          </li>
          <li class="header__link-wrapper">
            <a href="./proj_GradSchool.html#contact" class="header__link"> Contact </a>
          </li>
        </ul>
        <div class="header__main-ham-menu-cont">
          <img src="./assets/svg/ham-menu.svg" alt="hamburger menu" class="header__main-ham-menu" />
          <img src="./assets/svg/ham-menu-close.svg" alt="hamburger menu close"
            class="header__main-ham-menu-close d-none" />
        </div>
      </div>
    </div>
    <div class="header__sm-menu">
      <div class="header__sm-menu-content">
        <ul class="header__sm-menu-links">
          <li class="header__sm-menu-link">
            <a href="./index.html"> Home </a>
          </li>

          <li class="header__sm-menu-link">
            <a href="./index.html#about"> About </a>
          </li>

          <li class="header__sm-menu-link">
            <a href="./index.html#projects"> Projects & Experience</a>
          </li>

          <li class="header__sm-menu-link">
            <a href="./proj_GradSchool.html#contact"> Contact </a>
          </li>
        </ul>
      </div>
    </div>
  </header>
  <section class="project-cs-hero">
    <div class="project-cs-hero__content">
      <h1 class="heading-primary">Masters Degree</h1>
      <div class="project-cs-hero__info">
        <p class="text-primary">
          Legged robots have the potential to traverse remote or dangerous areas by utilizing
          intermittent ground contact to navigate through complex terrain. Despite their promise,
          legged robots, specifically bipeds, are inherently unstable and fail to operate reliably
          in unstructured environments. My research aimed to improve the standing balancing of
          bipedal robots through the development of a new unified model that incorporates three
          main fixed base balancing strategies of ankle, hip, and variable height.
        </p>
      </div>
      <div class="project-cs-hero__cta">
        <a href="https://qspace.library.queensu.ca/handle/1974/30096" class="btn btn--bg" target="_blank">Read My
          Thesis</a>
      </div>
      <div class="project-cs-hero__cta">
        <a href="#overview" class="btn btn--bg">Thesis Overveiw</a>
      </div>
      <div class="project-cs-hero__cta">
        <a href="#publications" class="btn btn--bg">Publications</a>
      </div>
      <div class="project-cs-hero__cta">
        <a href="#posters" class="btn btn--bg">Posters</a>
      </div>
    </div>
  </section>
  <section class="project-details">
    <div class="main-container">
      <div class="project-details__content">
        <div class="project-details__showcase-img-cont">
          <figure>
            <div class="flex-container">
              <img src="./assets/gif/VHIPPFW_reducedOrder.gif" alt="model" class="inner-image-small">
              <img src="./assets/gif/VHIPPFW_oneLeg.gif" alt="robot" class="inner-image">
            </div>
            <figcaption>Push recovery simulation of unified balancing model using nonlinear model predictive
              controller on reduced order model (left) <br> and a simple one-legged robot simulated in Simulink Simscape
              Multibody (right).
            </figcaption>
          </figure>
        </div>
        <div class="project-details__content-main">
          <div class="project-details__desc">
            <h3 class="project-details__content-title" id="overview">Thesis Overview</h3>
            <p class="project-details__desc-para">
              Legged robots are complex systems with a high degree of freedom which make optimal
              control methodologies for the whole-body dynamics computationally complex, especially
              for planning over long time horizons. Reduced order models encapsulate the whole-body
              dynamics into lower degree of freedom representation, making it more suitable for
              long term planning. The solutions of the reduced order models can then be
              used as objectives for the whole-body controller to track and execute.
            </p>
            <div class="project-details__small-img-cont">
              <img src="./assets/png/Modeling_Bipeds.png" class="project-details__small-img" alt="modeling biped">
            </div>
            <p class="project-details__desc-para">
              The existing reduced order models used in legged robots only consider two of the
              three available balancing strategies:
            <ol class="project-details__desc-list">
              <strong>ankle strategy</strong>: modulate center of pressure within the base of
              support.
            </ol>
            <ol class="project-details__desc-list">
              <strong>hip strategy</strong>: generate angular momentum about center of mass
              to produce restoring shear force at the base of support.
            </ol>
            <ol class="project-details__desc-list">
              <strong>variable height strategy</strong>: use vertical acceleration of
              center of mass to momentarily increase ground reaction force magnitude.
            </ol>
            </p>
            <p class="project-details__desc-para">
              In my research I propose the Variable Height Inverted Pendulum Plus Flywheel
              (VHIPPFW) model, a reduced order model that includes all available strategies
              with each of its control inputs relating to ankle, hip and variable height strategies.
            </p>
            <div class="project-details__small-img-cont">
              <img src="./assets/png/reduced order model.png" alt="Project Image" class="project-details__small-img" />
            </div>
            <div class="project-details__desc">
              <p class="project-details__desc-para">
                With this unified model we examined how access to all balancing strategies impacts
                push recovery performance. The key contributions of my research include:
              </p>
              <ol class="project-details__desc-list">
                Examined stability regions of existing models to identify the contribution of each balancing strategy
                on overall stability. &nbsp;&nbsp;&nbsp;&nbsp; <a class="btn btn--small btn--theme dynamicBgClr"
                  href=./proj_GradSchool.html#stability>learn more</a>
              </ol>

              <ol class="project-details__desc-list">
                Simulated push recovery on proposed model and compare its performance to existing
                models using trajectory optimization.
                &nbsp;&nbsp;&nbsp;&nbsp; <a class="btn btn--small btn--theme dynamicBgClr"
                  href=./proj_GradSchool.html#trajOpt>learn more</a>
              </ol>

              <ol class="project-details__desc-list">
                Developed a nonlinear model predictive controller for the proposed and existing reduced order models.
                Tested and tuned each controller on simulated model dynamics to achieve similar characteristics to
                trajectory optimization results. Then deployed controller on simulated one-legged robot in Simulink
                to test the practical implementation.
                &nbsp;&nbsp;&nbsp;&nbsp; <a class="btn btn--small btn--theme dynamicBgClr"
                  href=./proj_GradSchool.html#MPC>learn more</a>
              </ol>

              <div class="project-details__tools-used">
                <h3 class="project-details__content-title">Tools Used</h3>
                <div class="skills">
                  <div class="skills__skill">Trajectory Optimization</div>
                  <div class="skills__skill">Nonlinear Model Predictive Control</div>
                  <div class="skills__skill">Dynamic Modeling</div>
                  <div class="skills__skill">MATLAB</div>
                  <div class="skills__skill">Simulink</div>
                  <div class="skills__skill">CAD</div>
                  <div class="skills__skill">C++</div>
                </div>
              </div>
            </div>

            <h3 class="project-details__content-title" id="stability">Stability Analysis</h3>

            <p class="project-details__desc-para">
              For the stability analysis the Linear Inverted Pendulum (LIP), Linear Inverted Pendulum Plus
              Flywheel (LIPFW), and Variable Height Inverted Pendulum (VHIP) models were examined. These models
              correspond to an ankle,
              ankle + hip, and ankle + variable height balancing strategy. Anthropomorphic model parameters were used to
              gain insight on human balancing and better elucidate each strategies utility in standing balance for
              legged robots.
            </p>
            <div class="project-details__med-img-cont">
              <figure>
                <img src="./assets/png/LIP_stability.png" alt="lip stability" class="project-details__med-img" />
                <figcaption c>LIP model stability region with recovery trajectories using PD feedback control of the
                  center of pressure.
                  The LIP stability criterion requires the capture point to within the base of support: &delta; .
                </figcaption>
              </figure>
            </div>
            <p class="project-details__desc-para">
              Previous research has been done to analytically solve the stability region for the LIP and LIPPFW model.
              The VHIP
              model stability region is cumbersome to solve analytically due to its nonlinearity. The VHIP stability
              region was determined numerically by simulating the VHIP dynamics using maximum variable height control
              effort.
              After the maximum variable height control effort is complete, the model remains stable only if the LIP
              stability
              criterion is satisfied. The numerically determined VHIP stability region is as seen in the below figure.
            </p>
            <div class="project-details__med-img-cont">
              <figure>
                <div class="flex-container">
                  <img src="./assets/png/LIPPFW_stability.png" alt="Project Image" class="inner-image" />
                  <img src="./assets/png/VHIP_stability.png" alt="Project Image" class="inner-image" />
                </div>
                <figcaption>Comparison of stability region of LIPPFW (left) and VHIP (right) models with recovery
                  trajectories using maximum control effort.
                  The addition of the hip strategy offers uniform improvement and considerably increases the stability
                  region when compared to the addition
                  of the variable height strategy.
                </figcaption>
              </figure>
            </div>
            <p class="project-details__desc-para">
              For anthropomorphic systems, the ankle strategy has the largest impact on the stability region (blue
              region on the plots above), followed
              by the hip (orange region in left figure) and variable height (purple region in right figure)
              strategies. The hip and variable height strategies are constrained by joint limits, restricting
              the amount of time these strategies can be applied. While the hip strategy is independent
              of initial condition, the variable height strategy is dependent on initial condition. The variable height
              strategy is based on momentarily increasing the ground reaction force. The component of this force
              that contributes to restoring balance is dependant difference between the center of mass and the center of
              pressure, thus as the center of
              mass approaches the center of pressure limits, the impact of increased ground reaction force magnitude is
              reduced.
            </p>

            <h3 class="project-details__content-title" id="trajOpt">Trajectory optimization</h3>

            <div class="project-details__showcase-img-cont">
              <figure>
                <div class="flex-container">
                  <img src="./assets/gif/trajOpt_model.gif" alt="Project Image" class="inner-image-small" />
                  <img src="./assets/png/trajOptRecovery_VHIPPFW_627N_1e-1s_ControlTrj.png" alt="Project Image"
                    class="inner-image" />
                </div>
                <figcaption>Push recovery simulation of VHIPPFW animation (left) and control policy (right) at maximum
                  recoverable disturbance: 627N sustained for 0.1s.
                </figcaption>
              </figure>
            </div>

            <p class="project-details__desc-para">
              To evaluate the performance of push recovery of the proposed model against the existing models, trajectory
              optimization
              of the model dynamics was used to generate the optimal controls over a range of push disturbances. The
              performance of the
              recovery was compared by evaluating a range of metrics such as the maximum recoverable disturbance of each
              model. We also examined
              how the optimization selected the different balance strategy over the range of disturbances.
            </p>

            <p class="project-details__desc-para">
              The trapezoidal direct collocation method was used to transcribe the continuous time problem into a
              nonlinear program. The
              objective function was designed to equally penalize deviation of the model's state from the rest position
              and cost of
              control to encourage the optimization to select the most effective balancing strategy. The LIP, LIPPFW,
              VHIP
              and the VHIPPFW models were tested in push recovery simulation with each model subjected to a constant
              force sustained for 0.1 seconds.
              The magnitude of the disturbance is increased until the model fails to recover. The push recovery data was
              then processed to examine a
              variety of metrics, one of which was relative control contribution which was designed to evaluate the
              relative
              contribution of each balancing strategy as a percentage of the total cost of control.
            </p>
            <div class="project-details__med-img-cont">
              <figure>
                <img src="./assets/png/trajOpt_strategyComp.png" alt="Project Image" class="project-details__med-img" />
                <figcaption>Relative control contribution of each balancing strategy compared against push magnitude for
                  the VHIPPFW model. A hierarchal selection of balancing strategies is observed with
                  ankle balancing being dominant for small disturbances. As the push disturbances reach the limit of the
                  ankle strategy the hip strategy then begins to be adopted, while the variable height
                  strategy is adopted as disturbance reaches the combined ankle + hip balancing limit.
              </figure>
            </div>
            <p class="project-details__desc-para">
              The unified model with access to all available balancing strategies was able to recover from the largest
              push disturbance, 3.0% larger than the next best reduced order model.
              A hierarchal selection of balancing strategy was observed (see above figure), adopting the next most
              effective balancing strategy at
              limits of the previous strategy, exhibiting similarities to human balancing preferences.
            </p>

            <h3 class="project-details__content-title" id="MPC">Nonlinear Model Predictive Control</h3>
            <p class="project-details__desc-para">
              The trajectory optimization provides a useful open loop solution of the entire push recovery. However,
              this solution is
              limited as it cannot be solved online, requires full information on the push disturbance (magnitude and
              duration) and would not be robust to
              modeling errors. Model Predictive Control (MPC) is a method that recursively solves smaller scale
              trajectory optimization problems
              based on a measured state at the MPC frequency to generate a feedback control loop which is more robust to
              unknown disturbances and modeling error.
              We developed a nonlinear model predictive controller with similar optimization criterion from the
              trajectory optimization, and deployed the controller
              in simulation on a simple one-legged robot.
            </p>

            <div class="project-details__med-img-cont">
              <figure>
                <img src="./assets/png/control block diagram.png" class="project-details__med-img" />
                <figcaption>Control block diagram for the one-legged robot simulations.</figcaption>
              </figure>
            </div>

            <p class="project-details__desc-para">
              A nonlinear model predictive controller (NMPC) was constructed for the proposed and existing reduced order
              models using the same
              optimization criterion as the trajectory optimization. Next, push recovery simulations of the reduced
              order models with their respective
              NMPC controller was conducted subjecting the model to the same 0.1s constant force disturbance. The NMPC's
              prediction horizon was not large enough
              to observe failure on push onset so it did not fully utilize the hip and variable height strategies on
              push onset when it is most beneficial. To combat this,
              the objective function's weightings were tuned such that they produced similar control policies to
              trajectory optimization results.

              To test the practical implementation of the balancing controller, a simple simulated one-legged robot
              designed to approximate an anthropomorphic system was constructed using
              Simulink Simscape Multibody. A whole-body controller was designed to convert NMPC controls for the reduced
              order model to joint level controls to track
              the NMPC state and control objectives. Push recovery simulations were conducted on the one-legged robot
              using the same disturbances tested in the reduced order model simulations.
              Recovery metrics such as maximum recoverable disturbance were examined for the one-legged robot using NMPC
              controllers based on the four different reduced order models.
            </p>
            <div class="project-details__showcase-img-cont">
              <figure>
                <div class="flex-container">
                  <img src="./assets/gif/VHIPPFW_oneLeg.gif" alt="Project Image" class="inner-image" />
                  <img src="./assets/png/robotSim_VHIPPFW_478N_0.1s_control.png" alt="Project Image"
                    class="inner-image" />
                </div>
                <figcaption>Push recovery simulation of one-legged robot using the VHIPPFW NMPC controller (left) and
                  the respective control policy (right) at maximum recoverable disturbance: 627N sustained for 0.1s.
                </figcaption>
              </figure>
            </div>

            <p class="project-details__desc-para">
              With access to all available balancing strategies the NMPC controller based on the VHIPPFW model
              outperformed the models in
              both push recovery simulations of the model dynamics and one-legged robot recovering from 3.5 and 5.2 %
              larger disturbances than the next
              best model respectively.
            </p>
            <h3 class="project-details__content-title">Future Work</h3>
            <p class="project-details__desc-para">
              The next step of this research is hardware implementation on a one-legged robot. Development of a
              one-legged robot to test push recovery was started but due to
              time constraints and limited access to the lab during the early stages of the COVID-19 pandemic this scope
              was removed from of my thesis. Preliminary work was done
              on constructing and testing actuators to use for the one-legged robot. The prototype's actuation was based
              upon the <a href="https://open-dynamic-robot-initiative.github.io/"><u>Open Dynamic Robot
                  Initiative's</u></a> actuator design.
              Testing and integration of the field oriented control through the Texas Instruments evaluation board with
              Simulink was conducted on motor test rig to do simple force control tasks.
            </p>
            <div class="project-details__med-img-cont">
              <figure>
                <img src="./assets/jpeg/actuator_module_core_1.png" alt="Project Image"
                  class="project-details__med-img" />
                <figcaption> Open Dynamic Robot Initiative Torque controlled actuator module.
                </figcaption>
              </figure>
            </div>
            <div class="project-details__desc" id="publications">
              <h3 class="project-details__content-title">Publications</h3>
              <p class="project-details__desc-para"><a href="https://ieeexplore.ieee.org/document/9981193"
                  class="project-details__link">T. Huckell and A. R. Wu,
                  "Improved Zero Step Push Recovery with a Unified Reduced Order Model of Standing Balance,"
                  2022 IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS), Kyoto, Japan, 2022,
                  pp. 8321-8327, doi: 10.1109/IROS47612.2022.9981193.
                </a> (Attended and Presented)</p>
            </div>
            <div class="project-details__desc" id="posters">
              <h3 class="project-details__content-title">Posters</h3>
              <p class="project-details__desc-para"><a href="posters/IngenuityLabsPoster_ThomasHuckell.pdf"
                  class="project-details__link">
                  "Improved Standing Balancing For Legged Robots With Unified
                  Balancing Model"
                  2021 Robotics and AI Symposium (RAIS), Kingston, Ontario
                </a>
                (Attended and Presented - <strong>Winner of Best Poster in Robotics</strong>)
              </p>
              <p class="project-details__desc-para"><a href="posters/AMAM_Poster_Final.pdf"
                  class="project-details__link">T. Huckell and A. R. Wu,
                  "A Unified Reduced Order Model For Standing Balance Captures Biological Balance Strategy Preferences"
                  2021 International Symposium on Adaptive Motion of Animals and Machines (AMAM), Virtual Platform
                </a> (Attended and Presented)</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="main-footer">
    <div class="main-container">
      <div class="main-footer__upper">

        <div class="main-footer__row main-footer__row-2" id="contact">
          <h4 class="heading heading-sm text-lt">Thomas Huckell</h4>
          <p class="main-footer__short-desc">
            tom.huckell@gmail.com
          </p>
        </div>

        <div class="main-footer__row main-footer__row-1">
          <div class="main-footer__row main-footer__row-1__Resume">
            <h2 class="heading heading-sm main-footer__heading-sm">
              <span>Resume</span>
            </h2>
            <div class="main-footer__resume-cont">
              <a target="_blank" rel="noreferrer" href="resume/Resume_Thomas_Huckell.pdf">
                <img class="main-footer__icon" src="./assets/png/resume-ico.png" alt="icon" />
              </a>
            </div>
          </div>

          <div class="main-footer__row main-footer__row-1__Socials">

            <h2 class="heading heading-sm main-footer__heading-sm">
              <span>Socials</span>
            </h2>

            <div class="main-footer__social-cont">
              <a target="_blank" rel="noreferrer" href="#">
                <img class="main-footer__icon" src="./assets/png/linkedin-ico.png" alt="icon" />
              </a>
              <a target="_blank" rel="noreferrer" href="#">
                <img class="main-footer__icon" src="./assets/png/github-ico.png" alt="icon" />
              </a>
            </div>

          </div>


        </div>


      </div>


    </div>
  </footer>
  <script src="./index.js"></script>
</body>

</html>